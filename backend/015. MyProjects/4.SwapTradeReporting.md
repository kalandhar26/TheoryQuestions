### Swap Trade Reporting – Project Architecture

#### Project Overview

- I worked for 1STR application which was a regulatory reporting platform designed to capture, enrich, validate,
  transform, and report derivative trades to global regulators within strict SLAs.
- The system ensured regulatory compliance across multiple jurisdictions like MiFID II, ESMA, SFTR, and APAC
  regulations, handling both real-time and end-of-day (EOD) reporting.

#### Regulatory Scope

##### Jurisdictions Covered

- Europe: MiFID / MiFID II, ESMA, SFTR.
- APAC: Regional trade reporting regulations
- Different regulators = different schemas, formats, validations, and deadlines
- Architecture must support extensibility, not hard-coded logic
- *MiFID II:* Strict European laws for trading transparency.
- *APAC Regulations:* Similar rules for countries in Asia and the Pacific area.

##### Asset Classes Supported

- The platform was asset-class based, supporting: Fixed Income, Interest Rate Derivatives, Credit Derivatives, FX
  Derivatives, Commodity Derivatives.
- *Fixed Income:* Loans or bonds that pay steady interest.
- *Interest Rate Derivatives:* Bets on how interest rates will change.
- *Credit Derivatives:* Bets on whether companies or people will pay back loans.
- *FX (Foreign Exchange) Derivatives:* Bets on currency value changes, like dollars vs. euros.
- *Commodity Derivatives:* Bets on prices of things like oil, gold, or wheat.
- Asset-specific adapters for regulatory formats.

##### Reporting Types & SLAs

###### Real-Time Reporting

- Must be reported to regulators with in 2 minutes
- Extremely latency-sensitive
- Failure → regulatory breach

###### End-of-Day (EOD) Reporting

- Batch-oriented
- Completeness and reconciliation more important than latency

#### Architectural Style

- Event-Driven Architecture (EDA)
- This system was not request-response.
- It was built around asynchronous events.

## End-to-End Architecture Flow (Step by Step)

### Step 1: Trade Ingestion or Upstream Systems

- Trade data arrives from upstream trading systems into 1STR
- Each trade is treated as an immutable event

### Step 2: Regulatory Hub

- Once the trade is received, it goes to Regulatory hub a sub-modules which handles transformation.
- Which ever the format received. The module transforms the message to Standard XML format.

### Step 3: Regulatory Platform

- This module is responsible for Eligibility Check and route the message to particular Regulatory Processer based on the
  eligibility Check.

### Step 4: Enrichment inside the Regulatory Processor

- This module is responsible for regulatory reference data, static data (LEIs, venue codes, product classification)
- The Schema is validated, Mandatory field checks happen, data normalization (dates, currencies, identifiers).
- Invalid Trades are rejected, logged and routed for investigation.
- The Transformation happens based on regulatory rules, jurisdiction awareness, version controlled as regulatory rules
  changes.

### Step 5: Downstream Consumers

- Regulatory reporting systems.
- Direct regulatory submissions.
- Audit and reconciliation systems.

### Step 6: Error Handling & Reliability (Often Missed – Important!)

- Dead-letter queues for failed messages
- Retry strategies for transient failures
- Idempotent processing to avoid duplicate reporting
- Full audit trail for regulatory inspection

### Step 7: Testing Strategy (BDD Focus)

- Tool: Cucumber (BDD)
- Why BDD? Regulatory rules are business-driven
- Scenarios map well to compliance requirements

#### Testing the App

- I did a lot of testing using "Cucumber," a tool that makes tests easy to read like stories.

- Wrote simple "feature files" in a language called Gherkin (like "When I do this, then that happens").
- Built the behind-the-scenes code (step definitions) to check if trades flowed right.
- Tested the adding details, changing data, and sending messages parts.
- This helped make sure the whole process worked end-to-end for real regulatory reports.

### What I Learned

- Got a deep dive into how stock markets and reporting rules work.
- Hands-on with fast messaging systems for live data.
- Practiced changing and improving data, plus story-based testing (BDD).
- Picked up the tricky details of rules in Europe (MiFID II) and Asia-Pacific areas.

#### In short, it was a cool project blending finance rules, quick data handling, and solid testing to keep trades reported safely and on time!